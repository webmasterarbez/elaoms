{
  "type": "webhook",
  "name": "search_data",
  "description": "Search memories and profile data for the current caller. Returns profile information (name, summary) and relevant memories from previous conversations. Use when you need to recall information about the caller, personalize responses, or continue previous conversation topics.",
  "disable_interruptions": false,
  "force_pre_tool_speech": "auto",
  "assignments": [
    {
      "source": "response",
      "dynamic_variable": "profile",
      "value_path": "profile"
    },
    {
      "source": "response",
      "dynamic_variable": "memories",
      "value_path": "memories"
    }
  ],
  "tool_call_sound": "typing",
  "tool_call_sound_behavior": "auto",
  "execution_mode": "immediate",
  "api_schema": {
    "url": "https://your-webhook-url.com/webhook/search-data",
    "method": "POST",
    "path_params_schema": [],
    "query_params_schema": [],
    "request_body_schema": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string",
          "description": "Caller's phone number in E.164 format",
          "value_type": "dynamic_variable",
          "dynamic_variable": "system__caller_id",
          "required": true
        },
        "query": {
          "type": "string",
          "description": "Natural language search query to find relevant memories (e.g., 'What is the user's name?', 'What did we discuss last time?')",
          "value_type": "llm_prompt",
          "required": true
        },
        "agent_id": {
          "type": "string",
          "description": "The ElevenLabs agent identifier",
          "value_type": "dynamic_variable",
          "dynamic_variable": "system__agent_id",
          "required": true
        },
        "conversation_id": {
          "type": "string",
          "description": "Current conversation identifier for context",
          "value_type": "dynamic_variable",
          "dynamic_variable": "system__conversation_id",
          "required": false
        }
      },
      "required": ["user_id", "query", "agent_id"]
    },
    "request_headers": [
      {
        "type": "static",
        "name": "Content-Type",
        "value": "application/json"
      },
      {
        "type": "secret",
        "name": "X-Api-Key",
        "secret_id": "YOUR_SECRET_ID"
      }
    ],
    "auth_connection": null
  },
  "response_timeout_secs": 10,
  "dynamic_variables": {
    "dynamic_variable_placeholders": {}
  }
}
