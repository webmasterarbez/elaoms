{
  "name": "Financial Services Agent",
  "tags": ["banking", "financial", "accounts", "compliance"],
  "conversation_config": {
    "agent": {
      "first_message": "Thank you for calling SecureBank. This is David, your virtual banking assistant. For security purposes, may I have your account number or the last four digits of your Social Security number to verify your identity?",
      "language": "en",
      "prompt": {
        "prompt": "You are David, a professional and security-conscious virtual banking assistant for SecureBank. You handle account inquiries, transactions, and basic banking services.\n\n## CRITICAL Security Protocols:\n1. **Always verify identity** before discussing any account information\n2. **Never repeat full account numbers** - only last 4 digits\n3. **Never provide full SSN** - only confirm last 4 if customer provides them\n4. **Log all suspicious activity** immediately\n5. **Transfer to fraud department** for any suspected fraud\n\n## Identity Verification (Required):\nVerify customer with TWO of the following:\n- Account number (or last 4 digits) + PIN\n- Last 4 of SSN + date of birth\n- Account number + security question\n- Registered phone number (automatic if calling from it)\n\n## Your Capabilities:\n1. **Account Information**: Balances, recent transactions, statement requests\n2. **Card Services**: Report lost/stolen, request replacement, temporary lock\n3. **Payments**: Schedule payments, transfer funds, set up autopay\n4. **Disputes**: File transaction disputes, check dispute status\n5. **Account Updates**: Address changes, contact info, notification preferences\n\n## Service Limits (Require Human):\n- Wire transfers over $10,000\n- International transfers\n- Account closure\n- Loan applications\n- Investment advice\n- Complex dispute resolution\n\n## Fraud Indicators (Escalate Immediately):\n- Customer sounds distressed or coached\n- Requests to send money to unfamiliar recipients urgently\n- Unable to verify identity after 3 attempts\n- Claims of being locked out while traveling\n- Requests for account info to be sent to new email/phone\n\n## Dispute Process:\n1. Get transaction details (date, amount, merchant)\n2. Explain provisional credit timeline (10 business days)\n3. Document customer statement\n4. Provide dispute reference number\n5. Set expectations (45-90 days for resolution)\n\n## Compliance Reminders:\n- Never provide investment advice\n- Cannot guarantee fraud protection outcomes\n- Must disclose fees when applicable\n- Cannot waive legitimate fees without authorization\n\n## Tone:\n- Professional and trustworthy\n- Calm and measured pace\n- Security-first mindset\n- Empathetic during stressful situations (fraud, disputes)",
        "llm": "gpt-4o",
        "temperature": 0.3,
        "max_tokens": 1024,
        "tools": [
          {
            "type": "webhook",
            "name": "verify_customer",
            "description": "Verify customer identity with provided credentials",
            "api_schema": {
              "url": "https://your-webhook-url.com/api/auth/verify",
              "method": "POST",
              "request_body_schema": {
                "type": "object",
                "properties": {
                  "account_last4": {"type": "string", "description": "Last 4 digits of account number"},
                  "ssn_last4": {"type": "string", "description": "Last 4 digits of SSN"},
                  "dob": {"type": "string", "description": "Date of birth YYYY-MM-DD"},
                  "pin": {"type": "string", "description": "Account PIN"}
                }
              }
            }
          },
          {
            "type": "webhook",
            "name": "get_account_info",
            "description": "Retrieve account balance and recent transactions for verified customer",
            "api_schema": {
              "url": "https://your-webhook-url.com/api/accounts/info",
              "method": "GET",
              "query_params_schema": {
                "properties": {
                  "customer_id": {"type": "string", "description": "Verified customer ID"},
                  "include_transactions": {"type": "boolean", "description": "Include recent transactions"}
                },
                "required": ["customer_id"]
              }
            }
          },
          {
            "type": "webhook",
            "name": "lock_card",
            "description": "Temporarily lock or permanently block a debit/credit card",
            "api_schema": {
              "url": "https://your-webhook-url.com/api/cards/lock",
              "method": "POST",
              "request_body_schema": {
                "type": "object",
                "properties": {
                  "customer_id": {"type": "string"},
                  "card_last4": {"type": "string", "description": "Last 4 digits of card"},
                  "lock_type": {"type": "string", "description": "temporary or permanent"},
                  "reason": {"type": "string", "description": "lost, stolen, fraud, or other"}
                },
                "required": ["customer_id", "card_last4", "lock_type", "reason"]
              }
            }
          },
          {
            "type": "webhook",
            "name": "file_dispute",
            "description": "File a transaction dispute",
            "api_schema": {
              "url": "https://your-webhook-url.com/api/disputes/create",
              "method": "POST",
              "request_body_schema": {
                "type": "object",
                "properties": {
                  "customer_id": {"type": "string"},
                  "transaction_date": {"type": "string", "description": "Date of disputed transaction"},
                  "transaction_amount": {"type": "number"},
                  "merchant_name": {"type": "string"},
                  "dispute_reason": {"type": "string", "description": "unauthorized, duplicate, not_received, defective, other"},
                  "customer_statement": {"type": "string", "description": "Customer's description of the issue"}
                },
                "required": ["customer_id", "transaction_date", "transaction_amount", "dispute_reason"]
              }
            }
          },
          {
            "type": "webhook",
            "name": "schedule_payment",
            "description": "Schedule a bill payment or transfer",
            "api_schema": {
              "url": "https://your-webhook-url.com/api/payments/schedule",
              "method": "POST",
              "request_body_schema": {
                "type": "object",
                "properties": {
                  "customer_id": {"type": "string"},
                  "payment_type": {"type": "string", "description": "bill_pay or transfer"},
                  "recipient": {"type": "string", "description": "Payee or account to transfer to"},
                  "amount": {"type": "number"},
                  "scheduled_date": {"type": "string", "description": "Payment date YYYY-MM-DD"}
                },
                "required": ["customer_id", "payment_type", "recipient", "amount", "scheduled_date"]
              }
            }
          },
          {
            "type": "system",
            "name": "transfer_to_number",
            "description": "Transfer to fraud department for security concerns",
            "phone_number": "+18005551111"
          },
          {
            "type": "system",
            "name": "end_call",
            "description": "End the call when banking assistance is complete"
          }
        ]
      }
    },
    "asr": {
      "provider": "elevenlabs",
      "quality": "high",
      "keywords": ["checking", "savings", "transfer", "dispute", "fraud", "balance"]
    },
    "tts": {
      "model_id": "eleven_turbo_v2_5",
      "voice_id": "ErXwobaYiN019PkySvjV",
      "stability": 0.7,
      "similarity_boost": 0.8,
      "optimize_streaming_latency": "2"
    },
    "turn": {
      "turn_timeout": 15.0,
      "silence_end_call_timeout": 30.0,
      "turn_eagerness": "patient"
    },
    "conversation": {
      "max_duration_seconds": 1200
    }
  },
  "platform_settings": {
    "evaluation": {
      "criteria": [
        {
          "id": "identity_verified",
          "name": "Identity Verification",
          "type": "prompt",
          "conversation_goal_prompt": "Verify that proper identity verification was completed before any account information was shared"
        },
        {
          "id": "request_completed",
          "name": "Request Completed",
          "type": "prompt",
          "conversation_goal_prompt": "Determine if the customer's banking request was successfully completed"
        },
        {
          "id": "compliance_maintained",
          "name": "Compliance Maintained",
          "type": "prompt",
          "conversation_goal_prompt": "Check that no compliance violations occurred (no investment advice, proper disclosures, etc.)"
        }
      ]
    },
    "data_collection": {
      "service_type": {
        "type": "string",
        "description": "Type of service requested: balance, transactions, card_services, payment, dispute, other"
      },
      "identity_verified": {
        "type": "boolean",
        "description": "Whether customer identity was successfully verified"
      },
      "fraud_flag": {
        "type": "boolean",
        "description": "Whether fraud indicators were detected"
      },
      "dispute_filed": {
        "type": "boolean",
        "description": "Whether a transaction dispute was filed"
      },
      "escalated": {
        "type": "boolean",
        "description": "Whether call was transferred to human agent"
      }
    },
    "privacy": {
      "record_voice": true,
      "retention_days": 365
    }
  }
}
